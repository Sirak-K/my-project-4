{% block content_show_posts %}

<!-- POSTS SECTION -->
{% for post in posts %}

<section class="post-section-container">
  <div class="post-section">

    <article class="post post-2">
          <img class="post-image" src="" alt="Post 2 Image">
          <div class="post-content">
          <h3 class="post-header"></h3>
          <p class="post-text">
      </div>  
    </article>

    <article class="post post-2">
        <img class="post-image" src="" alt="Post 2 Image">
        <div class="post-content">
        <h3 class="post-header"></h3>
        <p class="post-text">
      </div>  
    </article>

    <article class="post post-2">
        <img class="post-image" src="" alt="Post 2 Image">
        <div class="post-content">
        <h3 class="post-header"></h3>
        <p class="post-text">
      </div>  
    </article>
  </div>

</section>
{% endfor %}


<h1>Show Posts</h1>

<div class="pagination">
    <span class="step-links">
      {% if posts.has_previous %}
        <a href="?page=1">&laquo; first</a>
        <a href="?page={{ posts.previous_page_number }}">previous</a>
      {% endif %}
  
      <span class="current">
        Page {{ posts.number }} of {{ posts.paginator.num_pages }}.
      </span>
  
      {% if posts.has_next %}
        <a href="?page={{ posts.next_page_number }}">next</a>
        <a href="?page={{ posts.paginator.num_pages }}">last &raquo;</a>
      {% endif %}
    </span>
  </div>


<button class="like-btn" data-post-id="{{ post.id }}">Like ({{ post.likes }})</button>

<script>
document.querySelectorAll('.like-btn').forEach(btn => {
  btn.addEventListener('click', async () => {
    const postId = btn.dataset.postId;
    const response = await fetch(`/like_post/${postId}/`, { method: 'POST' });
    const data = await response.json();
    btn.textContent = `Like (${data.likes})`;
  });
});
</script>

{% endblock content_show_posts %}
